"use strict";(()=>{var ge=Object.create;var D=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,fe=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var V=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t)=>{for(var r in t||={})_.call(t,r)&&V(e,r,t[r]);if(O)for(var r of O(t))we.call(t,r)&&V(e,r,t[r]);return e};var ye=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var We=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ve(t))!_.call(e,o)&&o!==r&&D(e,o,{get:()=>t[o],enumerable:!(i=me(t,o))||i.enumerable});return e};var Ie=(e,t,r)=>(r=e!=null?ge(fe(e)):{},We(t||!e||!e.__esModule?D(r,"default",{value:e,enumerable:!0}):r,e));var se=ye((wt,ne)=>{"use strict";var S=Object.defineProperty,Ae=Object.defineProperties,Ue=Object.getOwnPropertyDescriptor,Re=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertyNames,C=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||={})z.call(t,r)&&$(e,r,t[r]);if(C)for(var r of C(t))J.call(t,r)&&$(e,r,t[r]);return e},E=(e,t)=>Ae(e,Re(t)),xe=(e,t)=>{var r={};for(var i in e)z.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&C)for(var i of C(e))t.indexOf(i)<0&&J.call(e,i)&&(r[i]=e[i]);return r},Le=(e,t)=>{for(var r in t)S(e,r,{get:t[r],enumerable:!0})},be=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ee(t))!z.call(e,o)&&o!==r&&S(e,o,{get:()=>t[o],enumerable:!(i=Ue(t,o))||i.enumerable});return e},Te=e=>be(S({},"__esModule",{value:!0}),e),g=(e,t,r)=>new Promise((i,o)=>{var n=d=>{try{a(r.next(d))}catch(u){o(u)}},s=d=>{try{a(r.throw(d))}catch(u){o(u)}},a=d=>d.done?i(d.value):Promise.resolve(d.value).then(n,s);a((r=r.apply(e,t)).next())}),Y={};Le(Y,{createContextualWidget:()=>pt});ne.exports=Te(Y);var X=e=>{var t,r,i,o;if(!e.amplitude)return{userId:null,deviceId:null};let n=e.amplitude.getInstance();return{userId:(r=(t=n?.options)==null?void 0:t.userId)!=null?r:null,deviceId:(o=(i=n?.options)==null?void 0:i.deviceId)!=null?o:null}},Ce=500,Pe=5,b=null,Se=(e,t)=>{let{delay:r=Ce,times:i=Pe}=t||{},o=0;return n=>{n.cohortUserId||(b&&e.removeEventListener("load",b),b=()=>{let s=setInterval(()=>{o+=1;let{userId:a}=X(e);if(a){n.identifyUser({cohortUserId:a}),clearInterval(s);return}o>=i&&clearInterval(s)},r)},e.addEventListener("load",b))}},Fe={apiKey:"",snippetCdnUrl:"https://snippet.maze.co",apiUrl:"https://prompts.maze.co/api",testingPagesUrl:"https://t.maze.co"},De=480,ze=e=>y(y({},Fe),e.mazeContextualSettings||{}),Q=e=>(t,r={})=>{let i=e.createElement("script");return i.src=t,i.async=r.async||!1,i.defer=r.defer||!1,i.id=r.id||"",e.getElementsByTagName("head")[0].appendChild(i),i},Me="https://snippet.maze.co",Oe="maze-widget-app-script",Ve=(e,t,r={})=>{let{snippetCdnUrl:i=Me}=r,o=Oe;if(e.getElementById(o))return e.getElementById(o);let n=`${i}/contextualWidgetAppScaffold.js`;return Q(e)(n,{id:o,async:!0})},_e="__contextual-widget__",$e=({type:e,action:t,payload:r,channel:i})=>({type:e,action:t,payload:r,channel:i}),H=e=>`${_e}${e}`,He=(e,t={})=>{let{id:r="PROMPT"}=t,i=[];return{send:o=>{let n=$e(y({channel:H(r)},o));e.postMessage(n,"*")},listen:o=>{let n=a=>{let{data:d}=a,u=d,{channel:c}=u,p=xe(u,["channel"]);c===H(r)&&o(p)};e.addEventListener("message",n);let s=()=>{e.removeEventListener("message",n)};i.push(s)},close:()=>{i.forEach(o=>{o()}),i=[]}}},je=(e,t)=>{let r=e.location.href;return i=>{let o=t.body||t,{location:n}=e;function s(){n.href!==r&&(r=n.href,i(n.href))}let a=new MutationObserver(s);o&&a.observe(o,{subtree:!0,childList:!0})}},j={[0]:void 0,[1]:"color: cyan",[3]:void 0,[5]:"color: yellow",[9]:"color: red"};function Be(e){try{if(!(e!=null&&e.localStorage))return;let t=e.localStorage.getItem("maze-log-level");return t?parseInt(t,10):void 0}catch{return}}var P=class{static initializeLoggerMode(e){var t;e&&(P._window=e,e.MAZE_LOG_LEVEL=(t=Be(e))!=null?t:9)}getCurrentLogLevel(){var e,t;return(t=(e=P._window)==null?void 0:e.MAZE_LOG_LEVEL)!=null?t:9}verbose(e,t){this.logEvent(e,1,t)}info(e,t){this.logEvent(e,3,t)}warning(e,t){this.logEvent(e,5,t)}error(e,t){this.logEvent(e,9,t)}logEvent(e,t=3,r){let i=this.getCurrentLogLevel();t>=i&&(r===void 0?console.log(`%c maze-snippet: ${e}`,j[t]):console.log(`%c maze-snippet: ${e}`,j[t],r))}},l=new P,ee=class extends Error{constructor(e,t,r){super(e),this.statusCode=t,this.correlationId=r,this.name="WidgetLoadError"}};function Ke(e,t){return Math.random()*(t-e)+e}function Ne(){return`${Date.now()}-${Ke(0,1e4)}`}function ke({apiUrl:e,apiKey:t}){return function(r,i,o){return g(this,null,function*(){let n=yield fetch(`${e}/${r}`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","x-api-key":t,"x-maze-snippet-src":"contextual-widget","x-maze-correlation-id":o},body:JSON.stringify(i)});if(n.ok)return n;let s="Error fetching contextual prompts.";try{s=(yield n.json()).message||s}catch{}throw new ee(s,n.status,o)})}}var te=({apiUrl:e,apiKey:t})=>{var r;let i=ke({apiUrl:e,apiKey:t}),o=typeof window<"u"?(r=window.navigator)==null?void 0:r.userAgent:"unknown",n=Ne();return{getWidgetsForVisitor:s=>g(void 0,[s],function*({cohortProvider:a,cohortUserId:d}){try{return yield(yield i("widgets",{cohortProvider:a,cohortUserId:d},n)).json()}catch(u){return l.error("Error fetching contextual prompts.",{error:u}),[]}}),logEvent:s=>g(void 0,[s],function*({source:a,level:d,message:u,data:c}){var p;try{yield i("event",{source:a,level:d,message:u,data:E(y({},c),{userAgent:o,pathname:((p=window?.location)==null?void 0:p.pathname)||""})},n)}catch(h){l.error("Error logging events to the API.",{error:h})}})}},re=class{constructor(e){this.cacheClearTimeouts={},this.cachedItems=new Set,this.storage=e}getValue(e){let t=this.storage.getItem(e);if(!t)return null;let r=JSON.parse(t);return this.isValueExpired(r)?(this.removeValue(e),null):r.value}setValue(e,t,r=0){let i={value:t,expiresIn:r>0?Date.now()+r*60*1e3:0};this.storage.setItem(e,JSON.stringify(i)),this.cachedItems.add(e),this.cacheClearTimeouts[e]&&clearTimeout(this.cacheClearTimeouts[e]),r>0&&(this.cacheClearTimeouts[e]=setTimeout(()=>{this.removeValue(e)},r*60*1e3))}removeValue(e){this.storage.removeItem(e),this.cachedItems.delete(e),this.cacheClearTimeouts[e]&&(clearTimeout(this.cacheClearTimeouts[e]),delete this.cacheClearTimeouts[e])}clearAll(){this.cachedItems.forEach(e=>{this.removeValue(e)})}isValueExpired(e){return e.expiresIn>0&&e.expiresIn<Date.now()}},F=class{constructor(e=!1){this.supportsExipresIn=e,this.cacheClearTimeouts={},this.storage={}}getValue(e){return this.storage[e]||null}setValue(e,t,r=0){this.storage[e]=t,this.cacheClearTimeouts[e]&&clearTimeout(this.cacheClearTimeouts[e]),r>0&&this.supportsExipresIn&&(this.cacheClearTimeouts[e]=setTimeout(()=>{this.removeValue(e)},r*60*1e3))}removeValue(e){delete this.storage[e],this.cacheClearTimeouts[e]&&(clearTimeout(this.cacheClearTimeouts[e]),delete this.cacheClearTimeouts[e])}clearAll(){Object.keys(this.storage).forEach(e=>{this.removeValue(e)})}},qe=typeof window<"u"&&window.localStorage?new re(window.localStorage):new F,B=new F,K=!1,N=e=>{if(K)return B.getValue(e)||[];try{return qe.getValue(e)||[]}catch{return K=!0,l.warning("[getWidgetIdsFromKey] Failed to get widget key from cache. Using fallback."),B.getValue(e)||[]}},Ge=()=>{let e=N("maze-contextual-widget-dismissed"),t=N("maze-contextual-widget-started");return[...e,...t]},Ze=(e,t)=>{var r,i,o,n;let s="maze-contextual-widget-fonts";if((i=(r=t.contentWindow)==null?void 0:r.document)!=null&&i.querySelector(`link#${s}`))return;let a=e.createElement("link");a.href="https://assets-cdn.maze.co/fonts/roobert-pro.css",a.rel="stylesheet",a.type="text/css",a.id=s,(n=(o=t?.contentWindow)==null?void 0:o.document)==null||n.head.appendChild(a)},T=e=>`${e}px`;function Je(e,{id:t}){return e.querySelector(`#${t}`)}function Ye(e,{id:t,tag:r}){let i=Je(e,{id:t});if(i)return i;let o=e.createElement(r);return o.id=t,e.body.appendChild(o),o}var ie=({id:e,_document:t=document})=>t.querySelector(`#${e}`),Xe=(e,t,{id:r,className:i})=>{var o;let n=ie({_document:(o=t.contentWindow)==null?void 0:o.document,id:r});return n||(n=e.createElement("div"),n.id=r),n.classList.contains(i)||n.classList.add(i),n.style.cssText=`
    width: 100%;
    height: 100%;
    position:relative;
  `,n},Qe=(e,t)=>({id:r})=>{var i,o,n;let s=`${r}-host`,a=`${r}-container`,d=Ye(t,{id:s,tag:"iframe"}),u=Xe(t,d,{id:a,className:a});return(n=(o=(i=d.contentWindow)==null?void 0:i.document)==null?void 0:o.body)==null||n.appendChild(u),d.addEventListener("load",()=>{var c,p,h,w;ie({_document:(c=d.contentWindow)==null?void 0:c.document,id:a})||(w=(h=(p=d.contentWindow)==null?void 0:p.document)==null?void 0:h.body)==null||w.appendChild(u)}),{host:d,container:u}},et={promptHostElement:{self:{default:2147483647},children:{contextualWidgetBranding:{self:{default:10}}}},mediaHostElement:{self:{hidden:0,shown:2147483647},children:{imageZoomControlButtons:{self:{default:10}}}}},tt="maze-contextual-widget",k=80,q={compact:{height:T(430),width:T(420+k)},expanded:{height:T(680),width:T(420+k)}},rt=`
  height: ${q.compact.height};
  width: ${q.compact.width};
  max-width: 100%;
  position: fixed;
  border: none;
  overflow: hidden;
  z-index: ${et.promptHostElement.self.default};
  color-scheme: normal;
`,G={BOTTOM_LEFT:{left:"0",bottom:"0",transform:"initial",right:"initial",top:"initial"},BOTTOM_RIGHT:{right:"0",bottom:"0",transform:"initial",left:"initial",top:"initial"},MIDDLE_LEFT:{left:"0",top:"50%",transform:"translateY(-50%)",right:" initial",bottom:"initial"},MIDDLE_RIGHT:{right:"0",top:"50%",transform:"translateY(-50%)",left:"initial",bottom:"initial"}},it={left:"0",right:"0",bottom:"0",top:"initial",transform:"initial"},Z=e=>Object.entries(e).reduce((t,[r,i])=>`${t}${r}:${i};
`,""),ot=e=>{if(e.hostMaxWidth<De)return Z(it);let t=G[e.position]||G.BOTTOM_RIGHT;return Z(t)},nt=(e,{position:t,hostMaxWidth:r})=>(e.style.cssText=rt+ot({position:t,hostMaxWidth:r}),e),st=(e,t)=>({position:r})=>{let{host:i,container:o}=Qe(window,document)({id:tt});return nt(i,{position:r,hostMaxWidth:window.outerWidth}),Ze(t,i),{host:i,container:o}};function at(e,t,r){return function(i){let{container:o,host:n}=st(e,t)({position:i?.styles.position||"BOTTOM_RIGHT"});if(!o)throw new Error("Cannot mount app");return r?r({host:n,container:o},i):(console.warn("mountApp is not defined"),null)}}var lt=class{constructor(e,t){this.config=e,this.cacheManager=t,this.unmountWidgetApp=null,this.widgetApp=null,this.identifyUser=r=>{var i,o;return r.cohortUserId?(this.cohortUserId=r.cohortUserId,this.cohortProvider="AMPLITUDE",this.hasIdentifiedUser()&&(this.clearWidgetsForDomain(),(o=(i=this.config).onUserIdentified)==null||o.call(i,{cohortUserId:this.cohortUserId})),!0):!1},this.registerWidgetApp=r=>{this.widgetApp=r},this.deregisterWidgetApp=()=>{this.unMountApp(),this.widgetApp=null},this.renderWidget=(r,i,...o)=>g(this,[r,i,...o],function*(n,s,{forceRequest:a}={}){var d,u;let c={step:"start",hasUnmountWidgetAppCallback:!!this.unmountWidgetApp};try{l.verbose("[renderWidget] START",{url:this.url,forceRequest:a});let{shouldRender:p,widgetsForRoute:h,widgetsForDomain:w}=yield this.shouldRenderWidget({forceRequest:a,errorLogInfo:c});if(c.step="fetchedWidgets",c.hasWidgetsForDomain=!!w.length,c.hasWidgetsForRoute=!!h.length,c.widgetsForDomain=w.map(I=>I.uuid),c.widgetsForRoute=h.map(I=>I.uuid),c.shouldRender=p,l.verbose("[renderWidget] shouldRenderWidget",{shouldRender:p,widgetsForRoute:h,widgetsForDomain:w,widgetApp:this.widgetApp}),this.widgetApp||(c.step="registeringWidgetApp",yield(u=(d=this.config).onShouldRegisterWidgetApp)==null?void 0:u.call(d,{widgets:w,filteredWidgets:h})),c.step="registeredWidgetApp",c.registeredWidgetApp=!!this.widgetApp,!p){this.unMountApp();return}let[v]=h;if(this.unMountApp(),!this.widgetApp)return;let W=yield this.executeGetVariablesFromRouteLazy({url:this.url,paths:v.paths});c.routeVariables=W,c.step="renderingWidget",this.unmountWidgetApp=at(n,s,this.widgetApp)(E(y({},v),{testingPagesUrl:this.config.testingPagesUrl,cohortUserId:this.cohortUserId,cohortProvider:this.cohortProvider,routeVariables:W,apiKey:this.config.apiKey}))}catch(p){let h=p,w={};throw h instanceof ee&&(w={statusCode:h.statusCode,correlationId:h.correlationId}),l.error("[renderWidget] error",{error:h}),this.mazeApi.logEvent({source:"contextualScaffold",level:"error",message:"Error while rendering widget",data:E(y({message:h.message,stack:h.stack,errorName:h.name},w),{errorLogInfo:c})}),h}}),this.setUrl=r=>{this.url=r},this.hasIdentifiedUser=()=>!!this.cohortUserId,this.clearWidgetsForDomain=()=>{this.widgetsForDomain=null},this.getWidgetsForDomain=()=>g(this,null,function*(){return l.verbose("[getWidgetsForDomain] START",{currentWidgetsForDomain:this.widgetsForDomain}),this.widgetsForDomain?(l.verbose("[getWidgetsForDomain] returned widgets from cache"),this.widgetsForDomain):(this.widgetsForDomain=yield this.mazeApi.getWidgetsForVisitor({cohortProvider:this.cohortProvider,cohortUserId:this.cohortUserId}),l.verbose("[getWidgetsForDomain] API result",{widgetsForDomain:this.widgetsForDomain}),this.widgetsForDomain)}),this.getWidgetsToRender=(...r)=>g(this,[...r],function*({forceRequest:i}={}){i&&this.clearWidgetsForDomain();let o=yield this.getWidgetsForDomain(),n=Ge(),s=o?.filter(a=>!n.includes(a.uuid));return s??[]}),this.filterWidgetsForRoute=r=>g(this,null,function*(){let i=r.map(o=>g(this,null,function*(){let{paths:n=[]}=o;return n.length===0||(yield this.executePathMatchesPatternLazy({url:this.url,paths:n}))?o:null}));return(yield Promise.all(i)).filter(Boolean)}),this.shouldRenderWidget=(...r)=>g(this,[...r],function*({forceRequest:i,errorLogInfo:o}={}){let n=yield this.getWidgetsToRender({forceRequest:i});if(o&&(o.step="getWidgetsToRender"),l.verbose("[shouldRenderWidget] filteredWidgetsForDomain",{filteredWidgetsForDomain:n,forceRequest:i}),!n.length)return{shouldRender:!1,widgetsForRoute:n,widgetsForDomain:n};let s=yield this.filterWidgetsForRoute(n);return o&&(o.step="filterWidgetsForRoute"),{shouldRender:!!s.length,widgetsForRoute:s,widgetsForDomain:n}}),this.unMountApp=()=>{this.unmountWidgetApp&&(this.unmountWidgetApp(),this.unmountWidgetApp=null)},this.initHelpers=()=>g(this,null,function*(){var r,i;this.helpersLoadPromise&&(yield this.helpersLoadPromise),!this.helpers&&(this.helpersLoadPromise=(i=(r=this.config).onLoadWidgetHelper)==null?void 0:i.call(r),this.helpers=yield this.helpersLoadPromise,l.verbose("[initHelpers] helpers",{helpers:this.helpers}))}),this.cohortUserId=e.cohortUserId,this.cohortProvider=e.cohortProvider,this.url=e.url,this.mazeApi=te({apiUrl:e.apiUrl,apiKey:e.apiKey})}get widgetsForDomain(){return this.cacheManager.getValue("maze:widgets")}set widgetsForDomain(e){try{this.cacheManager.setValue("maze:widgets",e,15),l.verbose("[set widgetsForDomain] cached widgets",{value:e})}catch(t){this.cacheManager=new F,this.cacheManager.setValue("maze:widgets",e),l.error("[set widgetsForDomain] error while saving to cache (using fallback)",{error:t,value:e}),this.mazeApi.logEvent({source:"contextualScaffold",level:"warn",message:"Failed to save widgets to session storage. Using fallback.",data:{message:t.message,value:e}})}}executeGetVariablesFromRouteLazy(e){return g(this,arguments,function*({url:t,paths:r}){var i;return this.helpers||(yield this.initHelpers()),(i=this.helpers)!=null&&i.getVariablesFromRoute?this.helpers.getVariablesFromRoute({url:t,paths:r}):(l.error("[executeGetVariablesFromRouteLazy] helpers not initialized"),{})})}executePathMatchesPatternLazy(e){return g(this,arguments,function*({url:t,paths:r}){var i;return this.helpers||(yield this.initHelpers()),(i=this.helpers)!=null&&i.pathMatchesPattern?this.helpers.pathMatchesPattern({url:t,paths:r}):(l.error("[executePathMatchesPatternLazy] helpers not initialized"),!1)})}},oe=class extends Error{constructor(e){super(e),this.name="ScriptLoadError"}},dt="https://snippet.maze.co",ct="maze-scaffold-helper-script",ut=(e,t,...r)=>g(void 0,[e,t,...r],function*(i,o,n={}){return new Promise((s,a)=>{let{snippetCdnUrl:d=dt}=n,u=ct;if(i.getElementById(u)){s(i.getElementById(u));return}let c=`${d}/contextualScaffoldHelpers.js`,p=Q(i)(c,{id:u,async:!0});p.addEventListener("load",s),p.addEventListener("error",()=>{a(new oe(`Error loading script ${c}`))})})}),ht=(e,t)=>{let r=ze(e),i=y(y({},r),t||{}),{userId:o}=X(e);return!i.cohortUserId&&o&&(i.cohortUserId=o,i.cohortProvider="AMPLITUDE"),i};function pt(e,t){let r=He(e),i=typeof e<"u"&&e.sessionStorage?new re(e.sessionStorage):new F;P.initializeLoggerMode(e);let o=window.location.href;return l.verbose("[createContextualWidget] START"),function(n){let s=ht(e,n),a=Se(e),d=te({apiUrl:s.apiUrl,apiKey:s.apiKey}),u=!1,c=m=>{v.setUrl(m),v.renderWidget(e,t).catch(f=>{l.error("[handleRouteChange] renderWidget",{error:f})})},p=({widgets:m,filteredWidgets:f})=>new Promise((A,U)=>{if(l.verbose("[onShouldRegisterWidgetApp] START",{attachedRouteChangeListener:u,widgetsForDomain:m,widgetsForPath:f}),m!=null&&m.length&&!u){u=!0;let pe=je(e,t);e.addEventListener("hashchange",R=>{l.verbose("[onShouldRegisterWidgetApp] hashChange event",{url:R.newURL}),c(R.newURL)}),pe(R=>{l.verbose("[onShouldRegisterWidgetApp] onRouteChange",{url:R}),c(R)})}if(!f||f.length===0){A(!1);return}l.verbose("[onShouldRegisterWidgetApp] loadWidgetAppScript",{snippetCdnUrl:s.snippetCdnUrl});let M=Ve(t,e,{snippetCdnUrl:s.snippetCdnUrl});M.onload=()=>{l.verbose("[onShouldRegisterWidgetApp] loadWidgetAppScript onLoad event"),A(!0)},M.onerror=()=>{U(new oe("Error loading widget app script"))}}),h=()=>g(this,null,function*(){return l.verbose("[onLoadWidgetHelper] load helper script",{snippetCdnUrl:s.snippetCdnUrl}),yield ut(t,e,{snippetCdnUrl:s.snippetCdnUrl}),e.mazeHelpers});r.listen(({type:m,payload:f})=>{if(m==="registerWidgetApp"){l.verbose("[onWidgetEvent] registerWidgetApp",{type:m}),v.renderWidget(e,t).catch(A=>{l.error("[onWidgetEvent] renderWidget",{type:m,error:A})});return}m==="deregisterWidgetApp"&&(l.verbose("[onWidgetEvent] deregisterWidgetApp",{type:m}),v.deregisterWidgetApp()),m==="widgetAppError"&&(l.error("[widgetAppError]",y({},f)),d.logEvent({source:"widgetApp",level:"error",message:"Error in widget React app",data:f}))});let w=()=>g(this,null,function*(){yield v.renderWidget(e,t)}),v=new lt(E(y({},s),{communicate:r,onShouldRegisterWidgetApp:p,onLoadWidgetHelper:h,onUserIdentified:w,url:o}),i);a(v);let W=!1,I=0,x=setInterval(()=>{if(I+=1,W){l.verbose("[detection] widget already loaded",{siteLoaded:W,activationAttempt:I}),clearInterval(x);return}if(I>10){l.warning("[detection] max activation attempt triggered",{activationAttempt:I,siteLoaded:W}),clearInterval(x);return}(t.readyState==="complete"||t.readyState==="interactive")&&(l.verbose("[detection] readyState triggered",{siteLoaded:W,activationAttempt:I}),clearInterval(x),W=!0,v.renderWidget(e,t))},1e3);e.addEventListener("load",()=>g(this,null,function*(){l.verbose("[window] onLoad",{siteLoaded:W}),clearInterval(x),W=!0,yield v.renderWidget(e,t)}));let he=({forceRequest:m=!1,forRoute:f}={})=>{if(l.verbose("[render] START",{forceRequest:m,forRoute:f}),f){let A=new URL(e.location.href).origin;try{let U=new URL(A+f);l.verbose("[render] set new URL",{newUrl:U}),v.setUrl(U.href)}catch(U){l.error("[render] Invalid URL",{baseUrl:A,forRoute:f,error:U});return}}v.renderWidget(e,t,{forceRequest:m})};return E(y({},v),{render:he})}}});var ae=Ie(se());var le=(e,t)=>{let r=(e==null?void 0:e.mazeUniversalSnippetApiKey)||"",i=L({},(e==null?void 0:e.mazePromptsSettings)||{apiKey:r});return(o={})=>{!i.apiKey&&r&&(i.apiKey=r),e.mazePrompts=(0,ae.createContextualWidget)(e,t)(L(L({},i),o))}};var gt=(e,t)=>e&&t?`${e}/static/${t}`:"",mt="69c1040",de=gt("https://snippet.maze.co",mt);var ce="https://prompts.maze.co/api",ue="https://t.maze.co";var vt={apiUrl:ce,testingPagesUrl:ue,snippetCdnUrl:de};le(window,document)(vt);})();
